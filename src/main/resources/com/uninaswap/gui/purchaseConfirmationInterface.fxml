<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" prefHeight="650.0" prefWidth="850.0" styleClass="main-container" stylesheets="@../guiCSS/purchaseConfirmationInterface.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.uninaswap.controllers.PurchaseConfirmationController">
    <top>
        <VBox styleClass="header-section">
            <children>
                <HBox alignment="CENTER_LEFT" prefHeight="70.0" styleClass="header-bar">
                    <padding>
                        <Insets left="20.0" right="20.0"/>
                    </padding>
                    <children>
                        <Label styleClass="page-title" text="Conferma Acquisto"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="cancelButton" cancelButton="true" mnemonicParsing="false" onAction="#onCancelPurchase" styleClass="back-button" text="← Indietro"/>
                    </children>
                </HBox>
                <Region prefHeight="3.0" styleClass="header-divider"/>
            </children>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll">
            <content>
                <VBox alignment="TOP_CENTER" spacing="30.0" styleClass="main-content">
                    <padding>
                        <Insets bottom="40.0" left="40.0" right="40.0" top="30.0"/>
                    </padding>
                    <children>
                        <!-- Main container -->
                        <HBox alignment="TOP_CENTER" spacing="30.0" styleClass="product-purchase-container">

                            <!-- Left column - product image -->
                            <VBox alignment="TOP_CENTER" prefWidth="350.0" spacing="20.0" styleClass="left-column">
                                <!-- Product image section -->
                                <StackPane styleClass="main-image-container">
                                    <ImageView fx:id="productImageView" fitHeight="280.0" fitWidth="280.0" pickOnBounds="true" preserveRatio="true" styleClass="product-main-image"/>
                                    <!-- Rimosso fx:id da noImageLabel perché non esiste nel controller -->
                                    <Label managed="false" styleClass="no-image-label" text="Immagine non disponibile" visible="false"/>
                                </StackPane>

                                <!-- Product title -->
                                <VBox alignment="CENTER" spacing="5.0" styleClass="product-title-container">
                                    <Label fx:id="titleLabel" styleClass="product-title" text="Nome Prodotto" wrapText="true"/>
                                </VBox>

                                <!-- Description preview -->
                                <VBox styleClass="description-preview">
                                    <Label styleClass="section-title" text="Descrizione"/>
                                    <Label fx:id="descriptionLabel" styleClass="description-text" text="Descrizione prodotto..." wrapText="true"/>
                                </VBox>
                            </VBox>

                            <!-- Right column - purchase confirmation -->
                            <VBox alignment="TOP_CENTER" prefWidth="350.0" spacing="25.0" styleClass="right-column">
                                <!-- Purchase confirmation card -->
                                <VBox alignment="CENTER" spacing="20.0" styleClass="purchase-confirmation-card">
                                    <Label styleClass="section-title-large" text="Riepilogo Acquisto"/>

                                    <!-- Price section -->
                                    <VBox alignment="CENTER" spacing="5.0" styleClass="price-section">
                                        <Label styleClass="price-label" text="Prezzo finale:"/>
                                        <Label fx:id="priceLabel" styleClass="price-value" text="€0.00"/>
                                    </VBox>

                                    <!-- Seller info -->
                                    <VBox styleClass="seller-section">
                                        <Label styleClass="section-title" text="Informazioni Venditore"/>
                                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="seller-info">
                                            <VBox alignment="CENTER" styleClass="seller-avatar">
                                                <Label styleClass="avatar-placeholder" text="V"/>
                                            </VBox>
                                            <VBox spacing="2.0">
                                                <!-- CAMBIATO: da sellerNameLabel a sellerLabel per corrispondere al controller -->
                                                <Label fx:id="sellerLabel" styleClass="seller-name" text="Nome Venditore"/>
                                                <!-- Rimosso fx:id perché non esistono nel controller -->
                                                <Label styleClass="seller-rating" text="⭐ 4.5/5"/>
                                                <Label styleClass="seller-joined" text="Membro dal 2023"/>
                                            </VBox>
                                        </HBox>
                                    </VBox>

                                    <!-- Important notes -->
                                    <VBox spacing="10.0" styleClass="important-notes">
                                        <Label styleClass="notes-title" text="Informazioni Importanti"/>
                                        <HBox alignment="CENTER_LEFT" spacing="8.0" styleClass="note-item">
                                            <Label styleClass="note-icon" text="✓"/>
                                            <Label styleClass="note-text" text="Acquisto sicuro tramite piattaforma UninaSwap" wrapText="true"/>
                                        </HBox>
                                        <HBox alignment="CENTER_LEFT" spacing="8.0" styleClass="note-item">
                                            <Label styleClass="note-icon" text="✓"/>
                                            <Label styleClass="note-text" text="Contatto diretto con il venditore" wrapText="true"/>
                                        </HBox>
                                        <HBox alignment="CENTER_LEFT" spacing="8.0" styleClass="note-item">
                                            <Label styleClass="note-icon" text="⚠"/>
                                            <Label styleClass="note-warning" text="L'acquisto è definitivo - Non sono previsti rimborsi" wrapText="true"/>
                                        </HBox>
                                    </VBox>
                                </VBox>

                                <!-- Confirmation button -->
                                <VBox alignment="CENTER" spacing="15.0" styleClass="button-section">
                                    <Button fx:id="confirmButton" defaultButton="true" mnemonicParsing="false" onAction="#onConfirmPurchase" prefHeight="45.0" prefWidth="200.0" styleClass="confirm-button" text="Conferma Acquisto"/>
                                    <Label styleClass="reassurance-text" text="Cliccando su Conferma Acquisto, accetti i termini e le condizioni di UninaSwap" wrapText="true"/>
                                </VBox>
                            </VBox>
                        </HBox>
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>